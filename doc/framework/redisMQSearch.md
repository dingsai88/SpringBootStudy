 
 
 
 
 
 I.redis http://www.redis.cn/
 五种：压缩列表（可以看作一种特殊的数组）、有序数组、链表、散列表、跳表。实际上，Redis 就是这些常用数据结构的封装。
 
 
II.string,
II.hash, 哈希表
II.list,双向链表
II.set 底层哈希表不可重复 交集并集什么的
II.zset(sorted set)有序集合
 
  

 
 
 II.list,双向链表
 一种是压缩列表（ziplist） 单个小于 64 字节、个数少于512
 一种是双向循环链表
 
 
 II.hash, 哈希表
 一种是压缩列表（ziplist）   单个小于 64 字节、个数少于512
 
 散列表：自动扩容
 
 
 II.set不重复集合 交集并集
一种是基于有序数组  数据都是整数、不超过 512
 基于散列表
 
II.SortedSet有序不重复集合zset
 一种是压缩列表（ziplist）  小于 64 字节、小于 128 个

跳表（Skip list）： 索引+原始链表




 I.ziplist压缩双向链表（数组形式存储内存连续）：
 总字节数+最后一位偏移数(直接定位尾)+数据总个数+(数据+数据)+zlend(最后一位固定255)
 zlbytes
 zltail
 zllen
 entry+entry
 zlend
 
 
 http://www.redis.cn/topics/distlock.html
 Redis分布式锁
 
 I.持久化:RDB快照fork。AOF追加慢
 
 I.主从：replication ID(复制ID):(记录发送数据的多少)
 I.哨兵：高可用自动选主。分片：高性能 三倍
 
 --------------------------------------------------------------------------
 
搜索引擎

四个部分：
搜集、深度优先和广度优先
分析、
索引、
查询
 
 
 树中的元素我们称为节点，图中的元素我们就叫作顶点（vertex）
 ，图中的一个顶点可以与任意其他顶点建立连接关系。我们把这种建立的关系叫作边（edge）
 ，每个用户有多少个好友，对应到图中，就叫作顶点的度（degree），就是跟顶点相连接的边的条数。
 
 微博的社交关系跟微信还有点不一样 引入边的“方向”的概念
 
 
 我们把这种边有方向的图叫作“有向图
 我们把边没有方向的图就叫作“无向图”。
 
 在有向图中，我们把度分为入度（In-degree）和出度（Out-degree）。
 
 顶点的入度，表示有多少条边指向这个顶点
 顶点的出度，表示有多少条边是以这个顶点为起点指向其他顶点。  。对应到微博的例子，入度就表示有多少粉丝，出度就表示关注了多少人。
 
 带权图（weighted graph） 我们可以通过这个权重来表示 QQ 好友间的亲密度。
 
 
 图最直观的一种存储方法就是，邻接矩阵（Adjacency Matrix）。 二维数组
 
 
 
 
种子网页链接（权重高的主站）：广度优先查找
 
 
 
 
 
 ---------------------------------------------------------------------------
 
 Topic：消息主题，一级消息类型，生产者向其发送消息。
 
 
 
 多协议接入
 HTTP 协议：采用 RESTful 风格，方便易用，快速接入，跨网络能力强。支持 Java、C++、.NET、Go、Python、Node.js 和 PHP 七种语言客户端。
 TCP 协议：区别于 HTTP 简单的接入方式，提供更为专业、可靠、稳定的 TCP 协议的 SDK 接入服务。支持的语言包括 Java、C/C++ 以及 .NET。
 
 
 
 管理工具
 Web 控制台：支持 Topic 管理、Group 管理、消息查询、消息轨迹展示和查询、资源报表以及监控报警管理。
 OpenAPI：提供开放的 API 便于将消息队列 RocketMQ 版管理工具集成到自己的控制台。 
 
 
 消息类型
 普通消息：消息队列 RocketMQ 版中无特性的消息，区别于有特性的定时/延时消息、顺序消息和事务消息。
事务消息：实现类似 X/Open XA 的分布事务功能，以达到事务最终一致性状态。
定时和延时消息：允许消息生产者对指定消息进行定时（延时）投递，最长支持 40 天。
顺序消息：允许消息消费者按照消息发送的顺序对消息进行消费。

 
 
 
 
 
 
重置消费位点(删除不需要信息)、死信队列（三天内处理多次重试异常的消息）、全球消息路由（不同地区同步数据）
 
 
 
 
 
 
 ------------------------------------------------------
 
 zookeeper 应用场景
 I.配置管理
 II.DNS服务
 I.组成员管理
 I.分布式锁
 
 
 
 不适用场景
 不能存大量数据
 
 zookeeper 数据模型：层次模型、文件系统模型

1.文件系统的树形结构便于表达数据之间的层次关系
2.文件系统的树形结构便于为不同的应用分配独立的命名空间

zk层次模型称作data tree:每个节点叫做znode


data tree接口:
znode数据只支持全量写入和读取。
data tree所有api都是wait free,互相API调用不会影响。



znode分类
可以持久可以临时

可以顺序行，单调递增整数
1.持久znode
2.临时znode
3.持久顺序znode 
4.临时顺序znode




master worker架构

1.只有一个master
2.多个 backup master . active master 失败了，一个backup master 升级
3. master 监控worker状态


 
 
 zookeeper 服务发现
 
 
 
 
 
 
 