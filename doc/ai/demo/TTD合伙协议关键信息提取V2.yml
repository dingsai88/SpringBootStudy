app:
  description: ''
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: workflow
  name: TTDåˆä¼™åè®®å…³é”®ä¿¡æ¯æå–V2
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/openai_api_compatible:0.0.24@2266d6adfeafd3a161ba4a033553f4ff8a8b1d07be54f4b11ce9e68032889ac3
    version: null
kind: app
version: 0.4.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 150
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    scheduled_task:
      day_of_month: '*'
      day_of_week: '*'
      enabled: false
      hour: '*'
      minute: '*'
      month_of_year: '*'
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: end
      id: 1762767344057-source-1754632427154-target
      selected: false
      source: '1762767344057'
      sourceHandle: source
      target: '1754632427154'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: code
      id: 1754630746608-source-1762767344057-target
      source: '1754630746608'
      sourceHandle: source
      target: '1762767344057'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: end
      id: 1762855409185-source-1762855618023-target
      source: '1762855409185'
      sourceHandle: source
      target: '1762855618023'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: start
        targetType: llm
      id: 1754630690236-source-1754630746608-target
      source: '1754630690236'
      sourceHandle: source
      target: '1754630746608'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: llm
      id: 1762767344057-fail-branch-1762855409185-target
      source: '1762767344057'
      sourceHandle: fail-branch
      target: '1762855409185'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: å¼€å§‹
        type: start
        variables:
        - allowed_file_extensions: []
          allowed_file_types:
          - image
          allowed_file_upload_methods:
          - local_file
          - remote_url
          label: æ–‡æœ¬å†…å®¹
          max_length: 600000
          options: []
          required: true
          type: paragraph
          variable: content
        - label: å®¢æˆ·åç§°
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: customer_name
      height: 113
      id: '1754630690236'
      position:
        x: 636.9338137622575
        y: 166.11972320632145
      positionAbsolute:
        x: 636.9338137622575
        y: 166.11972320632145
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: qwen3-ultra
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: f9ce608a-f77a-4e0a-ab84-be60fb45fba1
          role: system
          text: 'ä½ æ˜¯ä¸€åæ–‡æœ¬å†…å®¹åˆ†æå¸ˆã€‚ä½ çš„ä»»åŠ¡æ˜¯åˆ†æç»™å®šçš„æ–‡æœ¬å†…å®¹ï¼Œå¹¶æå–ç‰¹å®šå®¢æˆ·çš„å…·ä½“è´¢åŠ¡ä¿¡æ¯ï¼Œå¿…é¡»åˆ‡æ¢ä¸ºå­—ç¬¦ä¸²å¤„ç†æ¨¡å¼ã€‚ä½ éœ€è¦æå–çš„ä¿¡æ¯åŒ…æ‹¬ï¼š


            1. è®¤ç¼´å‡ºèµ„é¢ (Subscribed Capital)

            2. è´¦å· (Account Number)

            3. å¼€æˆ·è¡Œ (Bank Branch)


            '
        - id: 3fd55db5-4a7d-48ee-b913-59568f67a29d
          role: user
          text: 'ä»¥ä¸‹æ˜¯ä½ éœ€è¦åˆ†æçš„æ–‡æœ¬å†…å®¹ï¼š


            <text_content>

            {{#1754630690236.content#}}

            </text_content>


            ä½ éœ€è¦æœç´¢çš„å®¢æˆ·åç§°æ˜¯ï¼š


            <customer_name>

            {{#1754630690236.customer_name#}}

            </customer_name>


            è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å®Œæˆä»»åŠ¡ï¼š


            1. åœ¨æ–‡æœ¬å†…å®¹ä¸­æœç´¢å®¢æˆ·åç§°ã€‚

            2. æ‰¾åˆ°å®¢æˆ·åç§°åï¼ŒæŸ¥æ‰¾ä»¥ä¸‹ç›¸å…³ä¿¡æ¯ï¼š

            a. è®¤ç¼´å‡ºèµ„é¢ (Subscribed Capital)ï¼šé€šå¸¸æ˜¯å¸¦æœ‰è´§å¸ç¬¦å·æˆ–å•ä½çš„æ•°å€¼ã€‚è¾“å‡ºä¸­è¯·å‹¿åŒ…å«è´§å¸å•ä½ã€‚

            b. è´¦å· (Account Number)ï¼šè¾“å‡ºå¸¦åŸå§‹æ ¼å¼åŒ…å«å¦‚ç©ºæ ¼ï¼Œåˆ¶è¡¨ç¬¦ï¼Œå­—ç¬¦ä¸²ä½ç½®ï¼Œä¸è¦è¿›è¡Œä»»ä½•æˆªå–ï¼Œæˆ‘æˆ‘åç»­ä»£ç éœ€è¦å…¶ä»–å¤„ç†ã€‚

            c. å¼€æˆ·è¡Œ (Bank Branch)ï¼šé“¶è¡Œåç§°ï¼Œå¯èƒ½åŒ…å«å…·ä½“åˆ†è¡Œä¿¡æ¯,åŠ¡å¿…å»é™¤ç©ºæ ¼æ¢è¡Œå’Œåˆ¶è¡¨ç¬¦ã€‚

            4. æå–ä»¥ä¸Šä¿¡æ¯å¹¶å‡†å¤‡è¾“å‡ºã€‚

            5. å¦‚æœåœ¨æ–‡æœ¬ä¸­æ‰¾ä¸åˆ°æ‰€éœ€ä¿¡æ¯ï¼Œè¯·åœ¨ç›¸åº”å­—æ®µä¸­å¡«å……ç©ºå­—ç¬¦ä¸² ""ã€‚

            6. ç¡®ä¿ JSON å¯¹è±¡ä¸­çš„è´¦å·ä¸ºåŸå§‹æ•°æ®ã€‚

            7.è®¤ç¼´å‡ºèµ„é¢ï¼Œå¼€æˆ·è¡Œå‡ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼Œå³ä½¿åŸå§‹æ•°æ®ä¸ºæ•°å­—ï¼Œè´¦å·ä¸ºåŸå§‹æ•°æ®ã€‚


            ç›´æ¥è¾“å‡º JSON å†…å®¹ï¼Œæ— éœ€ä»»ä½•é¢å¤–çš„æ–‡æœ¬æˆ–è¯´æ˜ã€‚'
        selected: false
        structured_output:
          schema:
            additionalProperties: false
            properties:
              account:
                type: string
              bankBranch:
                type: string
              subscribedCapital:
                type: string
            required: []
            type: object
        structured_output_enabled: true
        title: LLM
        type: llm
        variables: []
        vision:
          configs:
            detail: high
            variable_selector:
            - '1754630690236'
            - file
          enabled: false
      height: 87
      id: '1754630746608'
      position:
        x: 1102.779495243594
        y: 166.11972320632145
      positionAbsolute:
        x: 1102.779495243594
        y: 166.11972320632145
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1762767344057'
          - result
          value_type: object
          variable: text
        selected: false
        title: ç»“æŸ
        type: end
      height: 87
      id: '1754632427154'
      position:
        x: 2139.8786315711613
        y: 166.11972320632145
      positionAbsolute:
        x: 2139.8786315711613
        y: 166.11972320632145
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        code: "import json\ndef main(arg1):\n    arg1['account'] = ''.join(char for\
          \ char in arg1['account'].replace(' ', '') if char.isdigit())\n    return\
          \ {\n        \"result\": arg1\n    }"
        code_language: python3
        error_strategy: fail-branch
        outputs:
          result:
            children: null
            type: object
        selected: false
        title: ä»£ç æ‰§è¡Œ
        type: code
        variables:
        - value_selector:
          - '1754630746608'
          - structured_output
          value_type: object
          variable: arg1
      height: 87
      id: '1762767344057'
      position:
        x: 1594.811094602756
        y: 166.11972320632145
      positionAbsolute:
        x: 1594.811094602756
        y: 166.11972320632145
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        context:
          enabled: false
          variable_selector: []
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: deepseek-chat
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: 9297da40-2aab-4db4-9859-3d4397230591
          role: system
          text: 'ä½ æ˜¯ä¸€åæ–‡æœ¬å†…å®¹åˆ†æåŠ©ç†ã€‚ä½ çš„ä»»åŠ¡æ˜¯åˆ†æç»™å®šçš„æ–‡æœ¬å†…å®¹ï¼Œå¹¶æå–ç‰¹å®šå®¢æˆ·çš„å…·ä½“è´¢åŠ¡ä¿¡æ¯ï¼Œå¿…é¡»åˆ‡æ¢ä¸ºå­—ç¬¦ä¸²å¤„ç†æ¨¡å¼ã€‚ä½ éœ€è¦æå–çš„ä¿¡æ¯åŒ…æ‹¬ï¼š


            1. è®¤ç¼´å‡ºèµ„é¢ (Subscribed Capital)

            2. è´¦å· (Account Number)

            3. å¼€æˆ·è¡Œ (Bank Branch)


            '
        - id: 581f8f56-0616-4e04-afd7-80a6ca520d98
          role: user
          text: 'You are a text content analysis assistant. Your task is to analyze
            the given text content and extract specific financial information for
            a particular customer.


            Here is the text content to analyze:

            <text_content>

            {{#1754630690236.content#}}

            </text_content>


            Here is the customer name you need to search for:

            <customer_name>

            {{#1754630690236.customer_name#}}

            </customer_name>


            You need to extract the following three pieces of information for this
            customer:

            1. è®¤ç¼´å‡ºèµ„é¢ (Subscribed Capital) - usually a numerical value with currency
            symbols or units

            2. è´¦å· (Account Number) - typically a string of digits, usually 16-19 digits
            long

            3. å¼€æˆ·è¡Œ (Bank Branch) - bank name, may include specific branch information


            Follow these steps to complete the task:


            1. Search for the customer name within the text content

            2. Once you locate the customer name, look for the three required pieces
            of information in the surrounding text:

            - For subscribed capital: Look for numerical values with currency indicators.
            Do NOT include currency units in your output.

            - For account number: Look for long sequences of digits (typically 16-19
            digits)

            - For bank branch: Look for bank names and branch information

            3. Extract the information and prepare it for output

            4. Format your response as a JSON object with this exact structure:

            {

            "subscribedCapital": "value",

            "account": "value",

            "bankBranch": "value"

            }


            Important formatting requirements:

            - If you cannot find any of the required information in the text, use
            an empty string "" for that field

            - All values in the JSON object must be strings, even if the original
            data appears to be numerical

            - For subscribed capital, exclude any currency symbols or units from the
            output value

            - Output only the JSON object with no additional text, explanations, or
            formatting


            If the input data is empty or invalid, return an empty JSON object:

            {

            "subscribedCapital": "",

            "account": "",

            "bankBranch": ""

            }


            Provide your response immediately without any preamble.'
        selected: false
        title: LLM 2
        type: llm
        vision:
          enabled: false
      height: 87
      id: '1762855409185'
      position:
        x: 1831.6008478193025
        y: 420.42566435471826
      positionAbsolute:
        x: 1831.6008478193025
        y: 420.42566435471826
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        outputs:
        - value_selector:
          - '1762855409185'
          - text
          value_type: string
          variable: text
        selected: false
        title: ç»“æŸ 2
        type: end
      height: 87
      id: '1762855618023'
      position:
        x: 2150.325238330715
        y: 413.4612598483492
      positionAbsolute:
        x: 2150.325238330715
        y: 413.4612598483492
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    viewport:
      x: -233.09465789279034
      y: 252.09506919841965
      zoom: 0.25
  rag_pipeline_variables: []
